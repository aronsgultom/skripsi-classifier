{% extends "base.html" %}

{% block title %}Login - Academic Portfolio{% endblock %}

{% block content %}
<div class="min-h-screen flex items-start justify-center pt-6 pb-4 px-4 sm:px-6 lg:px-8">
  <div class="max-w-md w-full space-y-6 max-h-[calc(100vh-96px)] overflow-auto">

    <!-- Flash Messages (untuk toast JS di base.html) -->
    <div id="flash-messages" style="display: none;">
      {% with messages = get_flashed_messages(with_categories=True) %}
        {% if messages %}
          {% for category, message in messages %}
            <div data-category="{{ category }}" data-message="{{ message }}"></div>
          {% endfor %}
        {% endif %}
      {% endwith %}
    </div>

    <!-- Header -->
    <div class="text-center">
      <div class="mx-auto h-14 w-14 bg-gradient-to-r from-teal-600 to-emerald-500 rounded-2xl flex items-center justify-center shadow-xl">
        <i class="fas fa-user-graduate text-white text-xl"></i>
      </div>
      <h2 class="mt-5 text-2xl font-bold text-slate-900 tracking-tight">Selamat Datang</h2>
      <p class="mt-1 text-sm text-slate-500">
        Masuk untuk mengklasifikasikan dokumen BKD Anda
      </p>
    </div>

    <!-- Form -->
    <div class="bg-white/85 backdrop-blur-lg rounded-2xl shadow-2xl p-6 border border-emerald-50">
      <form method="POST" class="space-y-5">
        <div class="space-y-4">
          <!-- Username -->
          <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">
              <i class="fas fa-user text-emerald-500 mr-2"></i>Username
            </label>
            <input
              type="text"
              name="username"
              required
              class="w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200 bg-white/60"
              placeholder="masukkan username"
            >
          </div>

          <!-- Password -->
          <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">
              <i class="fas fa-lock text-emerald-500 mr-2"></i>Password
            </label>
            <input
              type="password"
              name="password"
              required
              class="w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200 bg-white/60"
              placeholder="••••••••"
            >
          </div>
        </div>

        <button
          type="submit"
          class="w-full bg-gradient-to-r from-teal-600 to-emerald-500 text-white py-3 px-4 rounded-xl hover:from-teal-700 hover:to-emerald-600 transition-all duration-200 font-semibold text-base shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
        >
          <i class="fas fa-sign-in-alt mr-2"></i>Masuk
        </button>
      </form>

      <!-- Link register -->
      <div class="mt-5 text-center">
        <p class="text-sm text-slate-500">
          Belum punya akun?
          <a href="{{ url_for('auth.register') }}"
             class="text-emerald-600 hover:text-emerald-700 font-semibold">
            Daftar sekarang
          </a>
        </p>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const flashContainer = document.getElementById('flash-messages');
  if (!flashContainer) return;

  const items = flashContainer.querySelectorAll('[data-message]');
  items.forEach(el => {
    const category = el.getAttribute('data-category') || 'info';
    const message = el.getAttribute('data-message');
    if (message && typeof showNotification === 'function') {
      const mapped =
        (category === 'error' || category === 'danger') ? 'error' :
        (category === 'warning') ? 'warning' :
        (category === 'success') ? 'success' : 'info';
      showNotification(message, mapped);
    }
  });
});
</script>
{% endblock %}
