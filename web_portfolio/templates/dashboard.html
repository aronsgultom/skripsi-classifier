{% extends "base.html" %}

{% block title %}Dashboard - Academic Portfolio{% endblock %}

{% block head %}
<style>
    .feature-card {
        background-color: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(16px);
        border-radius: 1rem;
        padding: 2rem;
        box-shadow: 0 20px 45px -20px rgba(15, 118, 110, 0.35);
        border: 1px solid rgba(15, 118, 110, 0.06);
        transition: all 0.35s;
    }
    .feature-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 30px 60px -28px rgba(15, 118, 110, 0.45);
    }
</style>
{% endblock %}

{% block content %}
<!-- Flash Messages Data for JavaScript -->
<div id="flash-messages" style="display: none;">
    {% with messages = get_flashed_messages(with_categories=True) %}
        {% if messages %}
            {% for category, message in messages %}
                <div data-category="{{ category }}" data-message="{{ message }}"></div>
            {% endfor %}
        {% endif %}
    {% endwith %}
</div>

<!-- HERO / WELCOME -->
<div class="mb-8">
    <div class="bg-gradient-to-r from-teal-600 via-emerald-500 to-emerald-400 rounded-2xl p-8 text-white shadow-2xl border border-white/10">
        <div class="flex items-center justify-between gap-6">
            <div class="space-y-2">
                <p class="inline-flex items-center gap-2 bg-white/15 px-3 py-1 rounded-full text-sm">
                    <i class="fas fa-check-circle text-emerald-50"></i>
                    Sistem klasifikasi dokumen BKD
                </p>
                <h1 class="text-3xl font-bold tracking-tight">
                    Selamat datang kembali, {{ current_user.username }}!
                </h1>
                <p class="text-emerald-50/90 text-sm md:text-base max-w-2xl">
                    Kelola klasifikasi BKD Anda dalam satu tempat. 
                    Mulai dari pendidikan, penelitian, pengabdian, sampai penunjang.
                </p>
            </div>
            <div class="hidden md:block">
                <div class="bg-white/15 backdrop-blur-md rounded-2xl p-4 flex flex-col items-center gap-2 min-w-[160px]">
                    <div class="w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center">
                        <i class="fas fa-user-graduate text-2xl"></i>
                    </div>
                    <p class="text-xs uppercase tracking-wide text-emerald-50/70">Status akun</p>
                    <p class="text-sm font-semibold">Aktif</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- QUICK STATS -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <!-- Portofolio -->
    <div class="bg-white/90 backdrop-blur-lg rounded-xl px-6 py-3 shadow-lg border border-emerald-50 hover:shadow-xl transition-all duration-200">
        <div class="flex flex-col items-center text-center gap-2">
            <div class="w-12 h-12 bg-teal-100 rounded-xl flex items-center justify-center">
                <i class="fas fa-folder text-teal-700 text-xl"></i>
            </div>
            <p class="text-2xl font-bold text-slate-900">{{ portfolio_count }}</p>
            <p class="text-app-gray text-sm">Item Portofolio</p>
        </div>
    </div>

    <!-- Dokumen -->
    <div class="bg-white/90 backdrop-blur-lg rounded-xl px-6 py-3 shadow-lg border border-emerald-50 hover:shadow-xl transition-all duration-200">
        <div class="flex flex-col items-center text-center gap-2">
            <div class="w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center">
                <i class="fas fa-file-pdf text-emerald-600 text-xl"></i>
            </div>
            <p class="text-2xl font-bold text-slate-900">{{ document_count }}</p>
            <p class="text-app-gray text-sm">Dokumen BKD</p>
        </div>
    </div>

    <!-- Status Sistem -->
    <div class="bg-white/90 backdrop-blur-lg rounded-xl px-6 py-3 shadow-lg border border-emerald-50 hover:shadow-xl transition-all duration-200">
        <div class="flex flex-col items-center text-center gap-2">
            <div class="w-12 h-12 bg-sky-100 rounded-xl flex items-center justify-center">
                <i class="fas fa-signal text-sky-500 text-xl"></i>
            </div>
            <p class="text-2xl font-bold text-slate-900">Online</p>
            <p class="text-app-gray text-sm">Sistem berjalan normal</p>
        </div>
    </div>
</div>


<!-- MAIN CARDS -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
    <!-- Profile Card -->
    <div class="feature-card group flex flex-col">
        <div class="text-center mb-6">
            <div class="w-16 h-16 bg-gradient-to-r from-teal-500 to-emerald-500 rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform duration-300">
                <i class="fas fa-user-circle text-white text-2xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-slate-900 mb-2">Profile</h3>
            <p class="text-app-gray text-sm">Atur informasi user</p>
        </div>

        <!-- isi dibuat flex-1 supaya dorong tombol ke bawah -->
        <div class="space-y-3 mb-6 flex-1">
            <div class="flex items-center text-sm text-app-gray">
                <i class="fas fa-check-circle text-emerald-500 mr-2"></i>
                Identitas dan kontak
            </div>
            <div class="flex items-center text-sm text-app-gray">
                <i class="fas fa-check-circle text-emerald-500 mr-2"></i>
                Riwayat akademik
            </div>
            <div class="flex items-center text-sm text-app-gray">
                <i class="fas fa-check-circle text-emerald-500 mr-2"></i>
                Bio profesional
            </div>
        </div>

        <a href="{{ url_for('profile.manage_profile') }}"
           class="block w-full bg-gradient-to-r from-teal-500 to-emerald-500 text-white text-center py-3 px-4 rounded-xl hover:from-teal-600 hover:to-emerald-600 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
            <i class="fas fa-edit mr-2"></i>Kelola Profile
        </a>
    </div>

    <!-- Portfolio Card -->
    <div class="feature-card group flex flex-col">
        <div class="text-center mb-6">
            <div class="w-16 h-16 bg-gradient-to-r from-emerald-500 to-lime-500 rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform duration-300">
                <i class="fas fa-folder-open text-white text-2xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-slate-900 mb-2">Portofolio</h3>
            <p class="text-app-gray text-sm">Kelompokkan dokumen BKD</p>
        </div>

        <div class="space-y-3 mb-6 flex-1">
            <div class="flex items-center text-sm text-app-gray">
                <i class="fas fa-chalkboard-teacher text-emerald-500 mr-2"></i>
                Pendidikan
            </div>
            <div class="flex items-center text-sm text-app-gray">
                <i class="fas fa-microscope text-teal-500 mr-2"></i>
                Penelitian
            </div>
            <div class="flex items-center text-sm text-app-gray">
                <i class="fas fa-hands-helping text-lime-500 mr-2"></i>
                Pengabdian 
            </div>
            <div class="flex items-center text-sm text-app-gray">
                <i class="fas fa-layer-group text-emerald-500 mr-2"></i>
                Penunjang
            </div>
        </div>

        <a href="{{ url_for('portfolio.index') }}"
           class="block w-full bg-gradient-to-r from-emerald-500 to-lime-500 text-white text-center py-3 px-4 rounded-xl hover:from-emerald-600 hover:to-lime-600 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
            <i class="fas fa-eye mr-2"></i>Lihat Portofolio
        </a>
    </div>

    <!-- Services Card -->
    <div class="feature-card group flex flex-col">
        <div class="text-center mb-6">
            <div class="w-16 h-16 bg-gradient-to-r from-teal-500 to-emerald-500 rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform duration-300">
                <i class="fas fa-cloud-upload-alt text-white text-2xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-slate-900 mb-2">Layanan Dokumen</h3>
            <p class="text-app-gray text-sm">Upload → ekstraksi → klasifikasi otomatis</p>
        </div>

        <div class="space-y-3 mb-6 flex-1">
            <div class="flex items-center text-sm text-app-gray">
                <i class="fas fa-file-upload text-teal-500 mr-2"></i>
                Upload PDF BKD
            </div>
            <div class="flex items-center text-sm text-app-gray">
                <i class="fas fa-brain text-emerald-500 mr-2"></i>
                Model Terbaik
            </div>
            <div class="flex items-center text-sm text-app-gray">
                <i class="fas fa-tags text-emerald-500 mr-2"></i>
                Label Otomatis
            </div>
        </div>

        <a href="{{ url_for('services.services') }}"
           class="block w-full bg-gradient-to-r from-teal-500 to-emerald-500 text-white text-center py-3 px-4 rounded-xl hover:from-teal-600 hover:to-emerald-600 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
            <i class="fas fa-upload mr-2"></i>Upload Dokumen
        </a>
    </div>
</div>


<script>
document.addEventListener('DOMContentLoaded', function() {
    const flashContainer = document.getElementById('flash-messages');
    if (flashContainer) {
        const messageElements = flashContainer.querySelectorAll('[data-message]');
        messageElements.forEach(element => {
            const category = element.getAttribute('data-category') || 'info';
            const message = element.getAttribute('data-message');
            if (message && typeof showNotification === 'function') {
                const mapped = (category === 'error' || category === 'danger') ? 'error'
                             : (category === 'warning') ? 'warning'
                             : (category === 'success') ? 'success'
                             : 'info';
                showNotification(message, mapped);
            }
        });
    }
});
</script>
{% endblock %}
